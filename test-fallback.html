<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Fallback - Mus√©e IBAM</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #050508;
            color: #fff;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            background: rgba(15, 15, 25, 0.8);
            border: 1px solid rgba(0,240,255,0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .test-title {
            color: #00f0ff;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        .test-button {
            background: linear-gradient(45deg, #00f0ff, #06ffa5);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            transform: scale(1.05);
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            background: rgba(0,0,0,0.3);
        }
        .success { background: rgba(0,255,0,0.2); }
        .error { background: rgba(255,0,0,0.2); }
        .warning { background: rgba(255,255,0,0.2); color: #000; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="text-align: center; color: #00f0ff;">Test des Fallbacks - Mus√©e IBAM</h1>
        
        <div class="test-section">
            <h2 class="test-title">1. D√©tection WebGL</h2>
            <button class="test-button" onclick="testWebGL()">Tester WebGL</button>
            <div id="webgl-result" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">2. D√©tection CSS 3D</h2>
            <button class="test-button" onclick="testCSS3D()">Tester CSS 3D</button>
            <div id="css3d-result" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">3. Test Fallback CSS 3D</h2>
            <button class="test-button" onclick="testCSS3DFallback()">Tester Fallback CSS 3D</button>
            <div id="css3d-fallback-result" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">4. Test Fallback Simple</h2>
            <button class="test-button" onclick="testSimpleFallback()">Tester Fallback Simple</button>
            <div id="simple-fallback-result" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">5. Test Complet</h2>
            <button class="test-button" onclick="runCompleteTest()">Lancer Test Complet</button>
            <div id="complete-result" class="test-result"></div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">6. Ouvrir Mus√©e</h2>
            <button class="test-button" onclick="window.open('index.html', '_blank')">Ouvrir Mus√©e Complet</button>
            <p>Ouvre le mus√©e dans un nouvel onglet avec d√©tection automatique des capacit√©s.</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="css3d-fallback.js"></script>
    <script src="simple-fallback.js"></script>
    
    <script>
        function testWebGL() {
            const result = document.getElementById('webgl-result');
            try {
                const canvas = document.createElement('canvas');
                const hasWebGL = !!(window.WebGLRenderingContext && 
                                   (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
                
                if (hasWebGL) {
                    result.className = 'test-result success';
                    result.innerHTML = '‚úÖ WebGL est support√© par votre navigateur';
                } else {
                    result.className = 'test-result warning';
                    result.innerHTML = '‚ö†Ô∏è WebGL n\'est pas support√©, les fallbacks seront utilis√©s';
                }
            } catch (e) {
                result.className = 'test-result error';
                result.innerHTML = '‚ùå Erreur lors du test WebGL: ' + e.message;
            }
        }
        
        function testCSS3D() {
            const result = document.getElementById('css3d-result');
            try {
                if (typeof detectCSS3DSupport === 'function') {
                    const hasCSS3D = detectCSS3DSupport();
                    if (hasCSS3D) {
                        result.className = 'test-result success';
                        result.innerHTML = '‚úÖ CSS 3D est support√© par votre navigateur';
                    } else {
                        result.className = 'test-result warning';
                        result.innerHTML = '‚ö†Ô∏è CSS 3D n\'est pas support√©';
                    }
                } else {
                    result.className = 'test-result error';
                    result.innerHTML = '‚ùå Fonction de d√©tection CSS 3D non disponible';
                }
            } catch (e) {
                result.className = 'test-result error';
                result.innerHTML = '‚ùå Erreur lors du test CSS 3D: ' + e.message;
            }
        }
        
        async function testCSS3DFallback() {
            const result = document.getElementById('css3d-fallback-result');
            result.className = 'test-result';
            result.innerHTML = 'üîÑ Test en cours...';
            
            try {
                if (typeof initCSS3DFallback === 'function') {
                    const success = await initCSS3DFallback();
                    if (success) {
                        result.className = 'test-result success';
                        result.innerHTML = '‚úÖ Fallback CSS 3D initialis√© avec succ√®s';
                    } else {
                        result.className = 'test-result error';
                        result.innerHTML = '‚ùå √âchec de l\'initialisation du fallback CSS 3D';
                    }
                } else {
                    result.className = 'test-result error';
                    result.innerHTML = '‚ùå Fonction de fallback CSS 3D non disponible';
                }
            } catch (e) {
                result.className = 'test-result error';
                result.innerHTML = '‚ùå Erreur lors du test fallback CSS 3D: ' + e.message;
            }
        }
        
        function testSimpleFallback() {
            const result = document.getElementById('simple-fallback-result');
            result.className = 'test-result';
            result.innerHTML = 'üîÑ Test en cours...';
            
            try {
                if (typeof initSimpleFallback === 'function') {
                    const success = initSimpleFallback();
                    if (success) {
                        result.className = 'test-result success';
                        result.innerHTML = '‚úÖ Fallback Simple initialis√© avec succ√®s';
                    } else {
                        result.className = 'test-result error';
                        result.innerHTML = '‚ùå √âchec de l\'initialisation du fallback simple';
                    }
                } else {
                    result.className = 'test-result error';
                    result.innerHTML = '‚ùå Fonction de fallback simple non disponible';
                }
            } catch (e) {
                result.className = 'test-result error';
                result.innerHTML = '‚ùå Erreur lors du test fallback simple: ' + e.message;
            }
        }
        
        async function runCompleteTest() {
            const result = document.getElementById('complete-result');
            result.className = 'test-result';
            result.innerHTML = 'üîÑ Test complet en cours...';
            
            let report = '<h3>Rapport de Test Complet:</h3>';
            
            // Test WebGL
            try {
                const canvas = document.createElement('canvas');
                const hasWebGL = !!(window.WebGLRenderingContext && 
                                   (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
                report += hasWebGL ? '<p>‚úÖ WebGL: Support√©</p>' : '<p>‚ö†Ô∏è WebGL: Non support√©</p>';
            } catch (e) {
                report += '<p>‚ùå WebGL: Erreur</p>';
            }
            
            // Test CSS 3D
            try {
                if (typeof detectCSS3DSupport === 'function') {
                    const hasCSS3D = detectCSS3DSupport();
                    report += hasCSS3D ? '<p>‚úÖ CSS 3D: Support√©</p>' : '<p>‚ö†Ô∏è CSS 3D: Non support√©</p>';
                } else {
                    report += '<p>‚ùå CSS 3D: Fonction non disponible</p>';
                }
            } catch (e) {
                report += '<p>‚ùå CSS 3D: Erreur</p>';
            }
            
            // Test Fallbacks
            report += '<h4>Tests des Fallbacks:</h4>';
            
            // Test CSS 3D Fallback
            try {
                if (typeof initCSS3DFallback === 'function') {
                    const css3dSuccess = await initCSS3DFallback();
                    report += css3dSuccess ? '<p>‚úÖ Fallback CSS 3D: Fonctionnel</p>' : '<p>‚ùå Fallback CSS 3D: √âchec</p>';
                } else {
                    report += '<p>‚ùå Fallback CSS 3D: Non disponible</p>';
                }
            } catch (e) {
                report += '<p>‚ùå Fallback CSS 3D: Erreur</p>';
            }
            
            // Test Simple Fallback
            try {
                if (typeof initSimpleFallback === 'function') {
                    const simpleSuccess = initSimpleFallback();
                    report += simpleSuccess ? '<p>‚úÖ Fallback Simple: Fonctionnel</p>' : '<p>‚ùå Fallback Simple: √âchec</p>';
                } else {
                    report += '<p>‚ùå Fallback Simple: Non disponible</p>';
                }
            } catch (e) {
                report += '<p>‚ùå Fallback Simple: Erreur</p>';
            }
            
            result.className = 'test-result success';
            result.innerHTML = report;
        }
        
        // Test automatique au chargement
        window.addEventListener('load', () => {
            setTimeout(() => {
                runCompleteTest();
            }, 1000);
        });
    </script>
</body>
</html>

